(function(){'use strict';var h,k=[/^https?:\/\/inbox.google.com/],aa=["https://inbox.google.com/*"];var m=this,n=function(a,b){a=a.split(".");b=b||m;for(var c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b},p=function(a){a.g=function(){return a.Ma?a.Ma:a.Ma=new a}},q=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&
!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},r=function(a){return"string"==typeof a},ba=function(a,b,c){return a.call.apply(a.bind,arguments)},ca=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=
Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},t=function(a,b,c){t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ba:ca;return t.apply(null,arguments)};var da={19:"../images/ic_extension_rest_19dp.png",38:"../images/ic_extension_rest_38dp.png"},ea={Mb:"background",Nb:"content",da:"contextMenu",Ob:"inbox",Pb:"popup"},fa=chrome.i18n.getMessage("2589922721133554326");var ga=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ha=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},ia=Array.prototype.reduce?function(a,b,c,d){d&&(b=t(b,d));return Array.prototype.reduce.call(a,
b,c)}:function(a,b,c,d){var e=c;ha(a,function(c,f){e=b.call(d,e,c,f,a)});return e},ja=function(a){return Array.prototype.concat.apply(Array.prototype,arguments)},ka=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var la=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)},ma=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b},na=function(a){for(var b in ea)if(ea[b]==a)return!0;return!1},oa=function(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c},pa=function(a,b){b in a&&delete a[b]};var u=function(){this.f={};this.pa=this.pa.bind(this);chrome.runtime.onMessage.addListener(this.pa)};p(u);var qa=function(a,b,c){la(b,function(a,b){this.listen("background",b,a.bind(c||void 0))},a)};u.prototype.listen=function(a,b,c){na(a)&&(a=this.f[a]=this.f[a]||{},a[b]=a[b]||[],a[b].push(c))};var ra=function(a,b){na("background")&&null!=a.f.background&&"array"==q(a.f.background.JsExecutionReady)&&(a=a.f.background.JsExecutionReady,b=ga(a,b),0<=b&&Array.prototype.splice.call(a,b,1))};
u.prototype.send=function(a,b,c){b={target:a,action:b,data:c||{}};switch(a){case "content":a=sa(b);break;case "background":case "popup":a=ta(b);break;default:a=Promise.reject()}return a};var ta=function(a){return new Promise(function(b){chrome.runtime.sendMessage(a,function(a){b(a)})})},sa=function(a){return new Promise(function(b){chrome.tabs.query({active:!0,currentWindow:!0},function(c){"array"==q(c)&&0!=c.length&&chrome.tabs.sendMessage(c[0].id,a,function(a){b(a)})})})};
u.prototype.pa=function(a,b,c){var d=typeof a;if(("object"==d&&null!=a||"function"==d)&&"target"in a&&"action"in a&&na(a.target)&&a.target in this.f&&a.action in this.f[a.target]){d=a.data;a=this.f[a.target][a.action];for(var e=0;e<a.length;e++){var g=a[e];"function"==q(g)&&g.call(null,d,c,b)}}return!0};var ua={devel:"__bigtop_savetoinbox_devel_tunnel__"};ua.dogfood=ua.prod="__bigtop_savetoinbox_tunnel__";var v=function(){this.$={};this.Ka=this.lb.bind(this);chrome.runtime.onConnectExternal.addListener(this.ub.bind(this))};p(v);var va=ua.prod;v.prototype.send=function(a,b,c){b={target:"inbox",action:b,data:c||{}};a=this.$[a];return null!=a?(a.postMessage(b),!0):!1};
var wa=function(){var a=v.g();ha(ma(a.$),function(a){this.send(parseInt(a,10),"re",void 0)},a)},xa=function(){v.g();for(var a=0,b=0;b<aa.length;b++)chrome.tabs.query({url:aa[b]},function(b){for(var d=0;d<b.length;d++)chrome.tabs.executeScript(b[d].id,{code:"document.body.dispatchEvent(new Event('__SAVETOINBOX_INBOX__extensionInstalled__'));",runAt:"document_start"},function(){chrome.runtime.lastError&&a++})})};
v.prototype.ub=function(a){if(a.name==va&&null!=a.sender.tab){var b=a.sender.tab.id;setTimeout(function(){a.postMessage("ack")},1E3);a.onDisconnect.addListener(this.Ka);this.$[b]=a}else a.disconnect()};v.prototype.lb=function(a){a.onDisconnect.removeListener(this.Ka);var b=oa(this.$,function(b){return b==a});pa(this.$,b)};var w=function(){this.B="";this.P=ya};w.prototype.G=!0;w.prototype.D=function(){return this.B};w.prototype.toString=function(){return"Const{"+this.B+"}"};var za=function(a){return a instanceof w&&a.constructor===w&&a.P===ya?a.B:"type_error:Const"},ya={},x=function(a){var b=new w;b.B=a;return b};var y=function(){this.Ea="";this.cb=Aa};y.prototype.G=!0;y.prototype.D=function(){return this.Ea};var A=function(a){if(a instanceof y&&a.constructor===y&&a.cb===Aa)return a.Ea;q(a);return"type_error:SafeUrl"},Ba=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,Aa={},Ca=function(a){var b=new y;b.Ea=a;return b};Ca("about:blank");var B=function(){this.Lb="";this.eb=Da};B.prototype.G=!0;B.prototype.D=function(){return this.Lb};var Ea=function(a){if(a instanceof B&&a.constructor===B&&a.eb===Da)return a.Lb;q(a);return"type_error:TrustedResourceUrl"},Ga=function(){for(var a=[x("https://apis.google.com/js/client.js?onload="),x("onGAPILoad")],b="",c=0;c<a.length;c++)b+=za(a[c]);return Fa(b)},Da={},Fa=function(a){var b=new B;b.Lb=a;return b};var Ha=function(){gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);gapi.config.update("googleapis.config/auth/useFirstPartyAuthV2",!0);gapi.client.setApiKey("AIzaSyB3rCvogq1dbuAY2sSc-9tszWOwmBMRyJk")};p(Ha);var Ia=function(){Ha.g();return gapi},Ja=function(){var a=D.g;window.onGAPILoad=function(){window.onGAPILoad=null;a()};var b=Ga(),c=document.createElement("script");c.src=Ea(b);(document.head||document.documentElement).appendChild(c)};var Ka="StopIteration"in m?m.StopIteration:{message:"StopIteration",stack:""},La=function(){};La.prototype.next=function(){throw Ka;};La.prototype.fb=function(){return this};var E=function(a,b){this.u={};this.h=[];this.la=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};h=E.prototype;h.T=function(){F(this);for(var a=[],b=0;b<this.h.length;b++)a.push(this.u[this.h[b]]);return a};h.ea=function(){F(this);return this.h.concat()};h.aa=function(a){return G(this.u,a)};h.clear=function(){this.u={};this.la=this.c=this.h.length=0};
h.remove=function(a){return G(this.u,a)?(delete this.u[a],this.c--,this.la++,this.h.length>2*this.c&&F(this),!0):!1};var F=function(a){if(a.c!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];G(a.u,d)&&(a.h[c++]=d);b++}a.h.length=c}if(a.c!=a.h.length){for(var e={},c=b=0;b<a.h.length;)d=a.h[b],G(e,d)||(a.h[c++]=d,e[d]=1),b++;a.h.length=c}};h=E.prototype;h.get=function(a,b){return G(this.u,a)?this.u[a]:b};h.set=function(a,b){G(this.u,a)||(this.c++,this.h.push(a),this.la++);this.u[a]=b};
h.addAll=function(a){var b;if(a instanceof E)b=a.ea(),a=a.T();else{b=ma(a);var c=[],d=0,e;for(e in a)c[d++]=a[e];a=c}for(c=0;c<b.length;c++)this.set(b[c],a[c])};h.forEach=function(a,b){for(var c=this.ea(),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};h.clone=function(){return new E(this)};
h.fb=function(a){F(this);var b=0,c=this.la,d=this,e=new La;e.next=function(){if(c!=d.la)throw Error("The map has changed since the iterator was created");if(b>=d.h.length)throw Ka;var e=d.h[b++];return a?e:d.u[e]};return e};var G=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Ma=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Na=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e,g=null;0<=d?(e=a[c].substring(0,d),g=a[c].substring(d+1)):e=a[c];b(e,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}};var H=function(a,b){this.F=this.N=this.w="";this.U=null;this.K=this.I="";this.s=this.ob=!1;var c;a instanceof H?(this.s=void 0!==b?b:a.s,I(this,a.w),c=a.N,J(this),this.N=c,K(this,a.F),Oa(this,a.U),L(this,a.I),Pa(this,a.v.clone()),a=a.K,J(this),this.K=a):a&&(c=String(a).match(Ma))?(this.s=!!b,I(this,c[1]||"",!0),a=c[2]||"",J(this),this.N=M(a),K(this,c[3]||"",!0),Oa(this,c[4]),L(this,c[5]||"",!0),Pa(this,c[6]||"",!0),a=c[7]||"",J(this),this.K=M(a)):(this.s=!!b,this.v=new N(null,0,this.s))};
H.prototype.toString=function(){var a=[],b=this.w;b&&a.push(O(b,Qa,!0),":");var c=this.F;if(c||"file"==b)a.push("//"),(b=this.N)&&a.push(O(b,Qa,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.U,null!=c&&a.push(":",String(c));if(c=this.I)this.F&&"/"!=c.charAt(0)&&a.push("/"),a.push(O(c,"/"==c.charAt(0)?Ra:Sa,!0));(c=this.v.toString())&&a.push("?",c);(c=this.K)&&a.push("#",O(c,Ta));return a.join("")};
H.prototype.resolve=function(a){var b=this.clone(),c=!!a.w;c?I(b,a.w):c=!!a.N;if(c){var d=a.N;J(b);b.N=d}else c=!!a.F;c?K(b,a.F):c=null!=a.U;d=a.I;if(c)Oa(b,a.U);else if(c=!!a.I){if("/"!=d.charAt(0))if(this.F&&!this.I)d="/"+d;else{var e=b.I.lastIndexOf("/");-1!=e&&(d=b.I.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),g=[],f=0;f<e.length;){var z=e[f++];"."==z?d&&f==e.length&&g.push(""):".."==z?((1<g.length||
1==g.length&&""!=g[0])&&g.pop(),d&&f==e.length&&g.push("")):(g.push(z),d=!0)}d=g.join("/")}else d=e}c?L(b,d):c=""!==a.v.toString();c?Pa(b,M(a.v.toString())):c=!!a.K;c&&(a=a.K,J(b),b.K=a);return b};H.prototype.clone=function(){return new H(this)};
var I=function(a,b,c){J(a);a.w=c?M(b,!0):b;a.w&&(a.w=a.w.replace(/:$/,""));return a},K=function(a,b,c){J(a);a.F=c?M(b,!0):b;return a},Oa=function(a,b){J(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.U=b}else a.U=null},L=function(a,b,c){J(a);a.I=c?M(b,!0):b;return a},Pa=function(a,b,c){J(a);b instanceof N?(a.v=b,a.v.Ga(a.s)):(c||(b=O(b,Ua)),a.v=new N(b,0,a.s))},Va=function(a,b,c){J(a);a.v.set(b,c);return a},J=function(a){if(a.ob)throw Error("Tried to modify a read-only Uri");
};H.prototype.Ga=function(a){this.s=a;this.v&&this.v.Ga(a);return this};
var Wa=function(a){return a instanceof H?a.clone():new H(a,void 0)},M=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},O=function(a,b,c){return r(a)?(a=encodeURI(a).replace(b,Xa),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},Xa=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},Qa=/[#\/\?@]/g,Sa=/[\#\?:]/g,Ra=/[\#\?]/g,Ua=/[\#\?@]/g,Ta=/#/g,N=function(a,b,c){this.c=this.b=null;this.o=a||null;this.s=!!c},P=function(a){a.b||
(a.b=new E,a.c=0,a.o&&Na(a.o,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))};h=N.prototype;h.add=function(a,b){P(this);this.o=null;a=Q(this,a);var c=this.b.get(a);c||this.b.set(a,c=[]);c.push(b);this.c+=1;return this};h.remove=function(a){P(this);a=Q(this,a);return this.b.aa(a)?(this.o=null,this.c-=this.b.get(a).length,this.b.remove(a)):!1};h.clear=function(){this.b=this.o=null;this.c=0};h.aa=function(a){P(this);a=Q(this,a);return this.b.aa(a)};
h.ea=function(){P(this);for(var a=this.b.T(),b=this.b.ea(),c=[],d=0;d<b.length;d++)for(var e=a[d],g=0;g<e.length;g++)c.push(b[d]);return c};h.T=function(a){P(this);var b=[];if(r(a))this.aa(a)&&(b=ja(b,this.b.get(Q(this,a))));else{a=this.b.T();for(var c=0;c<a.length;c++)b=ja(b,a[c])}return b};h.set=function(a,b){P(this);this.o=null;a=Q(this,a);this.aa(a)&&(this.c-=this.b.get(a).length);this.b.set(a,[b]);this.c+=1;return this};h.get=function(a,b){a=a?this.T(a):[];return 0<a.length?String(a[0]):b};
h.toString=function(){if(this.o)return this.o;if(!this.b)return"";for(var a=[],b=this.b.ea(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.T(d),g=0;g<d.length;g++){var f=e;""!==d[g]&&(f+="="+encodeURIComponent(String(d[g])));a.push(f)}return this.o=a.join("&")};h.clone=function(){var a=new N;a.o=this.o;this.b&&(a.b=this.b.clone(),a.c=this.c);return a};var Q=function(a,b){b=String(b);a.s&&(b=b.toLowerCase());return b};
N.prototype.Ga=function(a){a&&!this.s&&(P(this),this.o=null,this.b.forEach(function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.o=null,this.b.set(Q(this,d),ka(a)),this.c+=a.length))},this));this.s=a};var R=function(a){a=Wa(a).toString();a instanceof y||(a=a.G?a.D():String(a),Ba.test(a)||(a="about:invalid#zClosurez"),a=Ca(a));return a},S=function(a){if(null==a)return!1;a=A(a);if(/^[\s\xa0]*$/.test(a)||"about:invalid#zClosurez"==a||Ya(a))return!1;a=Wa(a);return("http"==a.w||"https"==a.w)&&!!a.F},Ya=function(a){for(var b=0;b<k.length;b++)if(k[b].test(a))return!0;return!1};var T=function(){this.ha=!0};p(T);var U=function(){this.X=!1;this.J=new Map;this.M=-1;this.H=0;this.C=Ia()};p(U);
var Za=["emails","image"],W=function(a){return a.J.get(a.M)||null},ab=function(a){return a.H+1E4>Date.now()?Promise.resolve(W(a)):new Promise(function(a){$a(this).then(function(){a(W(this))}.bind(this),function(){a(null)})}.bind(a))},$a=function(a){return a.H+1E4>Date.now()?Promise.resolve(Array.from(a.J.values())):new Promise(function(a){bb(this).then(function(){cb(this).then(function(){a(Array.from(this.J.values()))}.bind(this))}.bind(this))}.bind(a))},db=function(a,b){a.M=b;a.C.config.update("googleapis.config/sessionIndex",
a.M)},eb=function(){var a=U.g();return bb(a).then(function(){return Promise.resolve(this.X)}.bind(a))},fb=function(){var a=U.g();return ab(a).then(a.L)};U.prototype.L=function(a){var b=K(I(new H,"https"),"inbox.google.com");a&&L(b,"u/"+a.ua);return b.toString()};
var bb=function(a){a.X=!1;return gb(a).then(a.pb.bind(a))},gb=function(a){return new Promise(function(a){chrome.cookies.get({url:"https://www.google.com",name:"SAPISID"},function(c){null!=c?(window.__SAPISID=c.value,this.X=!0):(window.__SAPISID=null,this.X=!1);a()}.bind(this))}.bind(a))};U.prototype.pb=function(){return new Promise(function(a){chrome.cookies.get({url:"https://www.google.com",name:"SID"},function(b){null!=b?window.__OVERRIDE_SID=!!b.value:this.X=window.__OVERRIDE_SID=!1;a()}.bind(this))}.bind(this))};
var cb=function(a){return new Promise(function(a){if(this.X){for(var c=this.C.client.newHttpBatch(),d=0;3>d;d++){var e=this.C.client.request({headers:{"X-Goog-AuthUser":String(d)},path:"plus/v1/people/me",params:{fields:Za.join(",")}})||null;null!=e&&c.add(e,{id:String(d)})}this.H=Date.now();c.then(function(c){T.g().ha=!0;if(null!=c.result){c=c.result;for(var d=new Map,e=0;3>e;e++)if(null!=c[e]&&null!=c[e].result){var l=c[e].result;if(null!=l.emails){var C;a:{C=l.emails;for(var V=0;V<C.length;V++)if("account"==
C[V].type){C=C[V].value;break a}C=""}l=l.image;l={ua:e,Aa:C,hb:null!=l&&null!=l.url?l.url:"https://www.gstatic.com/images/branding/product/2x/avatar_circle_grey_24dp.png"};""!=l.Aa&&d.set(e,l)}}this.J=d;hb(this)}else ib(this);a()}.bind(this),function(c){var d=T.g();c=-1!=n("result.error.code",c);d.ha=c;ib(this);a()}.bind(this))}else ib(this),a()}.bind(a))},hb=function(a){if(!a.J.has(a.M)){var b=-1;a.J.forEach(function(a,d){if(-1==b||d<b)b=d});-1!=b?db(a,b):a.M=-1}},ib=function(a){a.J.clear();a.M=
-1};var X=function(a){this.ab=a};X.prototype.get=function(){return new Promise(function(a){chrome.tabs.get(this.ab,function(b){a(b)})}.bind(this))};X.prototype.send=function(a,b){return new Promise(function(c){chrome.tabs.sendMessage(this.ab,{target:"content",action:a,data:b||null},function(a){c(a)})}.bind(this))};var jb=function(){return new Promise(function(a,b){chrome.tabs.query({active:!0,currentWindow:!0},function(c){"array"!=q(c)||0==c.length?b():a(new X(c[0].id))})})},nb=function(a){return kb().then(function(b){if(b)return lb(b).then(function(){return b});a?mb(a):fb().then(mb);return null})},kb=function(){return new Promise(function(a){var b=v.g().$;if(0==Object.keys(b).length)a(null);else{var c=U.g();ab(c).then(function(d){if(d)for(var e in b)if(b.hasOwnProperty(e)){var g=n("sender.tab",b[parseInt(e,
10)]),f;if(f=null!=g){var z=c;f=d;var l=g.url;f&&Ya(l)?(z=z.L(f),f=0==l.lastIndexOf(z,0)?!0:0==f.ua?0!=(new H(l)).I.lastIndexOf("/u/",0):!1):f=!1}if(f){a(g);return}}a(null)})}})},lb=function(a){return new Promise(function(b){chrome.windows.update(a.windowId,{focused:!0},function(){chrome.tabs.update(a.id,{active:!0},b)})})},mb=function(a){chrome.tabs.create({url:a,active:!0})};var pb=function(a){return new Promise(function(b,c){S(a.uri)?eb().then(function(d){d?(d=ob(a.uri),Ia().client.request({root:"https://reminders-pa.googleapis.com",path:"v1internalOP/reminders/create",method:"POST",body:JSON.stringify(d)}).then(function(){T.g().ha=!0;b()},function(a){-1==n("result.error.code",a)?(T.g().ha=!1,c(3)):c(2)})):c(1)}):c(4)})},rb=function(a){return new Promise(function(b,c){S(a.uri)?T.g().ha?(c=qb(a.uri,a.title),nb(c).then(function(b){if(b){var c={title:a.title,uri:A(a.uri)};
v.g().send(b.id,"sve",c)}}),b(a)):c(3):c(5)})},ob=function(a){var b={request_parameters:{user_agent:"INBOX_CRX_"+chrome.runtime.getManifest().version},taskList:{systemListId:"BIGTOP_SAVED_ITEMS"},fetchTaskAssistanceAsync:"true"};S(a)&&(b.task={assistanceHint:{url:A(a)}});return b},qb=function(a,b){a=A(a);b=b||"";return Va(Va(L(K(I(new H,"https"),"inbox.google.com"),sb()),"subject",b),"body",a).toString()},sb=function(){var a=0,b=W(U.g());null!=b&&(a=b.ua);return"u/"+a.toString()};var tb=Fa(za(x("https://www.google-analytics.com/analytics.js")));Fa(za(x("https://www.google-analytics.com/analytics_debug.js")));
var ub=function(){return new Promise(function(a){if(void 0===window.ga){window.GoogleAnalyticsObject="ga";window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)};window.ga.l=1*new Date;var b=document.createElement("script"),c=document.getElementsByTagName("script")[0];b.async=1;b.src=Ea(tb);c.parentNode.insertBefore(b,c);window.ga_debug={trace:!0};window.ga("create","UA-70334329-3","auto");window.ga("set","checkProtocolTask",null);window.ga(function(){a()})}})};var vb=function(){this.R=ub()};p(vb);var Y=function(a,b,c){a.R.then(function(){(0,window.ga)("send","event",b,c)}.bind(a))};var wb=function(){this.A=-1};var Z=function(){this.A=-1;this.A=64;this.j=Array(4);this.ib=Array(this.A);this.va=this.Z=0;this.reset()};(function(){function a(){}a.prototype=wb.prototype;Z.ja=wb.prototype;Z.prototype=new a;Z.prototype.constructor=Z;Z.Qb=function(a,c,d){for(var e=Array(arguments.length-2),g=2;g<arguments.length;g++)e[g-2]=arguments[g];return wb.prototype[c].apply(a,e)}})();Z.prototype.reset=function(){this.j[0]=1732584193;this.j[1]=4023233417;this.j[2]=2562383102;this.j[3]=271733878;this.va=this.Z=0};
var xb=function(a,b,c){c||(c=0);var d=Array(16);if(r(b))for(var e=0;16>e;++e)d[e]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(e=0;16>e;++e)d[e]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.j[0];c=a.j[1];var e=a.j[2],g=a.j[3],f;f=b+(g^c&(e^g))+d[0]+3614090360&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[1]+3905402710&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[2]+606105819&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^
b))+d[3]+3250441966&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[4]+4118548399&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[5]+1200080426&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[6]+2821735955&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[7]+4249261313&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[8]+1770035416&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[9]+2336552879&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+
(c^g&(b^c))+d[10]+4294925233&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[11]+2304563134&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[12]+1804603682&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[13]+4254626195&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[14]+2792965006&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[15]+1236535329&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(e^g&(c^e))+d[1]+4129170786&4294967295;b=c+(f<<5&4294967295|
f>>>27);f=g+(c^e&(b^c))+d[6]+3225465664&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[11]+643717713&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[0]+3921069994&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[5]+3593408605&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[10]+38016083&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[15]+3634488961&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[4]+3889429448&4294967295;c=e+(f<<20&4294967295|
f>>>12);f=b+(e^g&(c^e))+d[9]+568446438&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[14]+3275163606&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[3]+4107603335&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[8]+1163531501&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[13]+2850285829&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[2]+4243563512&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[7]+1735328473&4294967295;e=g+(f<<14&4294967295|
f>>>18);f=c+(g^b&(e^g))+d[12]+2368359562&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(c^e^g)+d[5]+4294588738&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[8]+2272392833&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[11]+1839030562&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[14]+4259657740&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[1]+2763975236&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[4]+1272893353&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^
b^c)+d[7]+4139469664&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[10]+3200236656&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[13]+681279174&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[0]+3936430074&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[3]+3572445317&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[6]+76029189&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[9]+3654602809&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[12]+3873151461&4294967295;
g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[15]+530742520&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[2]+3299628645&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(e^(c|~g))+d[0]+4096336452&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[7]+1126891415&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[14]+2878612391&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[5]+4237533241&4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[12]+1700485571&4294967295;b=c+
(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[3]+2399980690&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[10]+4293915773&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[1]+2240044497&4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[8]+1873313359&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[15]+4264355552&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[6]+2734768916&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[13]+1309151649&4294967295;
c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[4]+4149444226&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[11]+3174756917&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[2]+718787259&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[9]+3951481745&4294967295;a.j[0]=a.j[0]+b&4294967295;a.j[1]=a.j[1]+(e+(f<<21&4294967295|f>>>11))&4294967295;a.j[2]=a.j[2]+e&4294967295;a.j[3]=a.j[3]+g&4294967295};
Z.prototype.update=function(a,b){void 0===b&&(b=a.length);for(var c=b-this.A,d=this.ib,e=this.Z,g=0;g<b;){if(0==e)for(;g<=c;)xb(this,a,g),g+=this.A;if(r(a))for(;g<b;){if(d[e++]=a.charCodeAt(g++),e==this.A){xb(this,d);e=0;break}}else for(;g<b;)if(d[e++]=a[g++],e==this.A){xb(this,d);e=0;break}}this.Z=e;this.va+=b};
Z.prototype.digest=function(){var a=Array((56>this.Z?this.A:2*this.A)-this.Z);a[0]=128;for(var b=1;b<a.length-8;++b)a[b]=0;for(var c=8*this.va,b=a.length-8;b<a.length;++b)a[b]=c&255,c/=256;this.update(a);a=Array(16);for(b=c=0;4>b;++b)for(var d=0;32>d;d+=8)a[c++]=this.j[b]>>>d&255;return a};var yb=function(){return new Promise(function(a,b){var c=function(b){m.document.removeEventListener("paste",e);a(b)},d=function(){m.document.removeEventListener("paste",e);b()},e=function(a){a=a.clipboardData;0<a.items.length?(a=a.items[0],"string"==a.kind?a.getAsString(c):d()):d()};m.document.addEventListener("paste",e,!1);m.document.execCommand("paste")||d()})};var zb=function(){this.Pa=null};p(zb);
var Bb=function(a){return yb().then(function(a){var c=!1,d=null;a=a.trim().match(/^https?:\/\/\S+/i);a=null===a?null:a[0];null===a||(d=R(a));var e;if(e=null!==d)e=d,e=S(e)&&!Ab(A(e));return e?(e=new Z,e.update(a),a=e.digest().join(""),this.Pa!=a&&(c=!0,this.Pa=a),Promise.resolve(c?d:null)):Promise.reject()}.bind(a))},Cb=function(a,b){var c=v.g();Bb(a).then(function(a){null!=a&&(a={uri:A(a)},c.send(b,"sg",a))}).catch(function(){c.send(b,"csg");return Promise.resolve()})},Ab=function(a){return ia(k,
function(b,c){return b||c.test(a)},!1)};var Eb=function(){return new Promise(function(a){jb().then(function(b){var c=function(){ra(u.g(),c);a(b)};u.g().listen("background","JsExecutionReady",c);Db(b).catch(function(){ra(u.g(),c)})})})},Db=function(a){return new Promise(function(b,c){chrome.tabs.executeScript(a.ab,{code:"window['injected'] != null && window['injected'](); ",runAt:"document_start"},function(d){chrome.runtime.lastError?c():null==d||null==d[0]||d[0]?b():chrome.tabs.executeScript(a.ab,{file:"content/frame_binary.js",runAt:"document_idle"},
function(){chrome.runtime.lastError?c():b()})})})};var D=function(){this.Da=null;this.ra=!1;this.Y=U.g();this.a=vb.g();this.i=u.g();qa(this.i,{save:this.Fb,share:this.ba,selectAccount:this.Gb,requestAccountsInfo:this.Ua,backButtonClicked:this.V,changeAccountClicked:this.W,addAccountClicked:this.S,openInboxTabForCurrentUser:this.O,openFrame:Fb("openFrame"),closeFrame:Fb("closeFrame"),viewClicked:this.ca},this);chrome.extension.onConnect.addListener(this.vb.bind(this));chrome.tabs.onActivated.addListener(this.Kb.bind(this));chrome.contextMenus.create({title:Gb,
contexts:["link"],onclick:this.m.bind(this,"save_link")});chrome.contextMenus.create({title:Hb,contexts:["page"],onclick:this.m.bind(this,"save_page")});chrome.contextMenus.create({title:Ib,contexts:["image"],onclick:this.m.bind(this,"save_image")});chrome.contextMenus.create({title:Jb,contexts:["browser_action"],onclick:this.m.bind(this,"goto_inbox")});chrome.browserAction.setIcon({path:da});xa()};p(D);
var Gb=chrome.i18n.getMessage("8270832419043459112"),Hb=chrome.i18n.getMessage("5496304053561791777"),Ib=chrome.i18n.getMessage("3087439845205134075"),Jb=chrome.i18n.getMessage("1502340428511044252"),Kb=chrome.i18n.getMessage("8785270673240303246"),Lb=chrome.i18n.getMessage("7763281777428265070"),Mb=chrome.i18n.getMessage("3175142775295470486"),Nb=chrome.i18n.getMessage("5420083178576057937"),Ob=chrome.i18n.getMessage("9067180811076006016");
D.prototype.m=function(a,b){switch(a){case "goto_inbox":this.O({origin:"contextMenu"});return;case "save_image":a=R(b.srcUrl);b=S(a)?a:Pb(b);Y(this.a,"menu","menu_save_image_for_later");break;case "save_link":b=Pb(b);Y(this.a,"menu","menu_save_link_for_later");break;default:b=R(b.pageUrl),Y(this.a,"menu","menu_save_page_for_later")}Qb(this,{uri:b})};
var Pb=function(a){var b=R(a.linkUrl);return S(b)?b:R(a.pageUrl)},Qb=function(a,b){var c=function(d){d.send("notifyProgress");pb(b).then(function(){d.send("notifySuccess");Y(a.a,"success_dialog","success_dialog_show");wa()}).catch(function(b){d.send("hideDialog",{animation:!1});Rb(a,b,d,c)})};Eb().then(c)},Sb=function(a,b){var c=function(d){rb(b).then(function(){d.send("closeFrame")}).catch(function(b){Rb(a,b,d,c)})};Eb().then(c)},Rb=function(a,b,c,d){var e="",g=!1;switch(b){case 3:e=Kb;g=!0;break;
case 2:e=Lb;g=!0;Y(a.a,"error_dialog","error_dialog_gapi_problem");break;case 1:e=Mb;g=!1;Y(a.a,"error_dialog","error_dialog_user_not_logged_in");chrome.tabs.create({url:"https://inbox.google.com"});break;case 4:e=Nb;g=!1;Y(a.a,"error_dialog","error_dialog_wrong_url_saved");break;case 5:e=Ob;g=!1;Y(a.a,"error_dialog","error_dialog_wrong_url_shared");break;default:e=fa,g=!1,Y(a.a,"error_dialog","error_dialog_generic")}c.send("notifyError",{customErrorMessage:e,enableRetry:g&&"function"==q(d)}).then(function(a){null!=
a&&a.retry&&null!=d&&setTimeout(d,300,c)})};D.prototype.Fb=function(a,b){a={uri:R(a.url),title:a.title};Y(this.a,"opened_popup","opened_popup_save_for_later");this.ra=!0;Qb(this,a);b()};D.prototype.ba=function(a,b){a={uri:R(a.url),title:a.title};Y(this.a,"opened_popup","opened_popup_share_via_email");this.ra=!0;Sb(this,a);b()};
D.prototype.Gb=function(a,b){null!=a.sessionIndex&&"number"==typeof a.sessionIndex&&(db(this.Y,a.sessionIndex),a=Tb(W(this.Y),Array.from(this.Y.J.values())),b(a));Y(this.a,"account_menu","account_menu_select_account")};var Tb=function(a,b){var c={};c.current=a;c.all=b;return c};D.prototype.Ua=function(a,b){var c=Tb(W(this.Y),Array.from(this.Y.J.values()));b(c);$a(this.Y).then(function(a){var b=W(this.Y);c=Tb(b,a);this.i.send("popup","refreshAccountsInfo",c)}.bind(this)).catch(function(){})};
D.prototype.Kb=function(a){null!=v.g().$[a.tabId]&&Cb(zb.g(),a.tabId)};var Fb=function(a){return function(b,c,d){null!=d&&null!=d.tab&&((new X(d.tab.id)).send(a),c())}};h=D.prototype;h.vb=function(a){"popup-background-tunnel"==a.name&&(this.Da=a,Y(this.a,"popup","popup_open"),this.ra=!1,this.Da.onDisconnect.addListener(this.nb.bind(this)))};h.nb=function(){chrome.browserAction.setIcon({path:da});this.Da=null;this.ra||Y(this.a,"opened_popup","opened_popup_close_with_no_action")};
h.ca=function(){nb();Y(this.a,"success_dialog","success_dialog_click_view")};h.W=function(){Y(this.a,"opened_popup","opened_popup_change_account");this.ra=!0};h.V=function(){Y(this.a,"account_menu","account_menu_back_button")};h.S=function(){Y(this.a,"account_menu","account_menu_add_account")};h.O=function(a){nb();switch(a.origin){case "contextMenu":Y(this.a,"menu","menu_go_to_inbox");break;case "popup":Y(this.a,"opened_popup","opened_popup_go_to_inbox")}};
document.addEventListener("DOMContentLoaded",function(){Ja()});}).call(this);
