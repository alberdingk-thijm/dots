!function(){"use strict";function e(e,r,t){var i=t.get("userService"),s={request:function(t){var s=e.defer();if(Utilities.isUndefinedOrNull(t)||Utilities.isUndefinedOrNull(t.headers))return r.error(String.format("protectedResourceInterceptor.request: http request config is null or undefined")),s.resolve(t),s.promise;var n=t.headers["X-UserType"];if(Utilities.isUndefinedOrNull(n))return s.resolve(t),s.promise;var o=t.headers["X-Resource"];return delete t.headers["X-Resource"],delete t.headers["X-UserType"],i.acquireToken(n,t.url,o,function(e){Utilities.isUndefinedOrNull(e)||(t.headers.Authorization="Bearer "+e),s.resolve(t)}),s.promise},responseError:function(r){return r&&401===r.status&&i.clearToken(),e.reject(r)}};return s}angular.module("app.user").factory("protectedResourceInterceptor",["$q","$log","$injector",e])}();